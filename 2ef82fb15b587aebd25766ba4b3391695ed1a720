{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "e408d8bf_d6348991",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-04-06T14:06:49Z",
      "side": 1,
      "message": "Didn\u0027t mean to -2",
      "revId": "2ef82fb15b587aebd25766ba4b3391695ed1a720",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7446e174_465974c6",
        "filename": "usb/gadget/android.hardware.usb.gadget-service.bramble.rc",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-04-06T13:18:40Z",
      "side": 1,
      "message": "I don\u0027t know if this\u0027d always be right or conflict with something atm.",
      "revId": "2ef82fb15b587aebd25766ba4b3391695ed1a720",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f09eb5e_63edadb5",
        "filename": "usb/gadget/android.hardware.usb.gadget-service.bramble.rc",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-04-06T13:42:19Z",
      "side": 1,
      "message": "I\u0027ll do a little more research and test real with some OTG devices (and wireless debugging) to see if/how it changes and what happens if I change it. Won\u0027t take long.",
      "parentUuid": "7446e174_465974c6",
      "revId": "2ef82fb15b587aebd25766ba4b3391695ed1a720",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1ce2167a_fbcb8d6b",
        "filename": "usb/gadget/android.hardware.usb.gadget-service.bramble.rc",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2023-04-06T13:52:14Z",
      "side": 1,
      "message": "Per https://android.googlesource.com/kernel/msm/+/refs/heads/android-msm-redbull-4.19-android13-qpr2/drivers/usb/dwc3/dwc3-msm.c#3528 (mode_show/mode_store), it can either be peripheral, or host. \n\nOTG should be host. SeedVault backups, hope they don\u0027t get interrupted (super unlikely though)",
      "parentUuid": "0f09eb5e_63edadb5",
      "revId": "2ef82fb15b587aebd25766ba4b3391695ed1a720",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5a6b11a_6edd59fb",
        "filename": "usb/gadget/android.hardware.usb.gadget-service.bramble.rc",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-04-06T14:06:31Z",
      "side": 1,
      "message": "Right, and that\u0027s how it looks in practice as well... I\u0027d meant to look into this before you brought it up but I\u0027m glad you did since I might have forgotten.\n\nHere are the values of `a6000000.ssusb/mode`:\n- Nothing connected at all: `none`\n- `usb_data_enabled` is 0: `none`\n- PC is connected: `peripheral`\n- Flash drive is connected: `host`\n\nIf `a6000000.ssusb/mode` is `none`, and we change it to anything else (`host` or `peripheral`), it will both enter that mode *and* turn USB data on, despite `usb_data_enabled` continuing to show `disabled` (so that\u0027s... a quirk).\n\nBut I\u0027m not currently sure how we would know in advance what the correct mode is, and it might not be easy (or possible) to figure out, and I don\u0027t think we should set it incorrectly... :/",
      "parentUuid": "1ce2167a_fbcb8d6b",
      "revId": "2ef82fb15b587aebd25766ba4b3391695ed1a720",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d2157765_ad4207c2",
        "filename": "usb/gadget/android.hardware.usb.gadget-service.bramble.rc",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-04-06T14:09:38Z",
      "side": 1,
      "message": "Another quirk: if we set it to `peripheral` when nothing is connected, it will continue showing `peripheral` after connecting and using a flash drive, but it will function properly as if it is set to `host` anyway.",
      "parentUuid": "a5a6b11a_6edd59fb",
      "revId": "2ef82fb15b587aebd25766ba4b3391695ed1a720",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e3ca5789_adabdae3",
        "filename": "usb/gadget/android.hardware.usb.gadget-service.bramble.rc",
        "patchSetId": 5
      },
      "lineNbr": 41,
      "author": {
        "id": 1000062
      },
      "writtenOn": "2023-04-06T14:27:06Z",
      "side": 1,
      "message": "Leaving one last note and then we are going to split this out and remove the property stuff (can be a different set of patches):\n`/sys/class/typec/port0/data_role` has *almost* what we need for this, even with data off. It has \"host\" selected when it should be host, and \"device\" selected when it should be peripheral.",
      "parentUuid": "d2157765_ad4207c2",
      "revId": "2ef82fb15b587aebd25766ba4b3391695ed1a720",
      "serverId": "35266860-6252-469c-a67d-185064479fc0"
    }
  ]
}